(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{HVwC:function(e,t,n){},L1EO:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("L1EO"),n("HVwC"),n("JBxO"),n("FdtR"),n("QDHd");var a=n("uTJt"),l=n.n(a),o={page:1,apiKey:"89b9004c084fb7d0e8ffaadd17cb8254",total:0,getOneMovieInfo:function(e){var t="https://api.themoviedb.org/3/movie/"+e+"?api_key="+this.apiKey+"&language=en-US";return fetch(t).then((function(e){return e.json()}))},getPopularMovies:function(e){var t="https://api.themoviedb.org/3/movie/popular?api_key="+this.apiKey+"&language=en-US&page="+e+"&";return fetch(t).then((function(e){return e.json()}))},getMoviesBySearch:function(e){var t="https://api.themoviedb.org/3/search/movie?api_key="+this.apiKey+"&language=en-US&query="+e+"&page=1";return fetch(t).then((function(e){return e.json()}))},getGenre:function(){var e="https://api.themoviedb.org/3/genre/movie/list?api_key="+this.apiKey+"&language=en-US";return fetch(e).then((function(e){return e.json()})).then((function(e){return e.genres}))}},r={header:document.querySelector(".header"),nav:document.querySelector(".nav"),logo:document.querySelector(".logo"),home:document.querySelector("#home"),myLib:document.querySelector("#lib"),searchBox:document.querySelector(".search-box"),input:document.querySelector("#input"),notification:document.querySelector("#notification"),btnBox:document.querySelector(".btn-box"),gallery:document.querySelector(".movies-list"),container:document.querySelector(".container"),spinner:document.querySelector(".spinner-border"),error:document.querySelector("#error"),modal:document.querySelector("[data-modal]"),closeModalBtn:document.querySelector("[data-modal-close]"),movieCard:document.querySelector(".movie-card"),modalLib:document.querySelector("#modal-lib"),watchedBtn:document.querySelector("#watched"),queueBtn:document.querySelector("#queue")};function i(){r.error.classList.remove("visually-hidden")}function c(){r.spinner.classList.add("visually-hidden")}function u(){r.spinner.classList.remove("visually-hidden"),r.error.classList.add("visually-hidden")}var s,d,m;n("RtS0"),n("WB5j"),n("3dw1"),n("IlJM"),n("D/wG"),n("wcNg");function p(e,t,n,a,l,o,r){try{var i=e[o](r),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(a,l)}function h(e){return e.forEach((function(e){return e.genre_ids=function(e){for(var t="",n=function(n){var a=e[n];if(n>1&&e.length>3)return t+="Other","break";t+=s.find((function(e){return e.id===a})).name,(0===n&&e.length>1||1===n&&e.length>2)&&(t+=", ")},a=0;a<e.length;a++){if("break"===n(a))break}return t}(e.genre_ids)})),e.forEach((function(e){return e.release_date=e.release_date.slice(0,4)})),e}function f(e,t){for(var n=0;n<=t;n++)e.pop();return e}function v(e){u(),o.getPopularMovies(e).then((function(e){g(f(h(e.results),7))})).catch((function(){return i()})).finally((function(){return c()}))}function g(e){r.gallery.innerHTML=l()(e)}(d=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getGenre();case 2:s=e.sent;case 3:case"end":return e.stop()}}),e)})),m=function(){var e=this,t=arguments;return new Promise((function(n,a){var l=d.apply(e,t);function o(e){p(l,n,a,o,r,"next",e)}function r(e){p(l,n,a,o,r,"throw",e)}o(void 0)}))},function(){return m.apply(this,arguments)})(),v(),r.input.addEventListener("change",(function(e){e.preventDefault();var t=e.target.value;if(0==t)return;e.target.value="",u(),o.getMoviesBySearch(t).then((function(e){var t=h(e.results);if(20===t.length&&(t=f(t,7)),t.length)return r.notification.classList.add("visually-hidden"),g(e.results);r.notification.classList.remove("visually-hidden")})).catch((function(){return i()})).finally((function(){return c()}))}));var y=v,b=function(){r.home.classList.add("nav-link--curent"),r.myLib.classList.remove("nav-link--curent"),r.header.classList.add("header-home"),r.header.classList.remove("header-lib"),r.btnBox.classList.add("visually-hidden"),r.searchBox.classList.remove("visually-hidden")},w=function(){r.home.classList.remove("nav-link--curent"),r.myLib.classList.add("nav-link--curent"),r.header.classList.remove("header-home"),r.header.classList.add("header-lib"),r.btnBox.classList.remove("visually-hidden"),r.searchBox.classList.add("visually-hidden")},L=function(){r.modal.classList.toggle("is-hidden")};r.nav.addEventListener("click",(function(e){e.preventDefault(),e.target===r.myLib?w():e.target===r.home&&(b(),y())})),r.logo.addEventListener("click",(function(e){e.preventDefault(),b(),y(),r.watchedBtn.classList.add("btn--accent"),r.queueBtn.classList.remove("btn--accent")})),console.log(r.modalLib),r.modalLib.addEventListener("click",(function(e){e.preventDefault(),L(),w()})),window.addEventListener("keyup",(function(){"Escape"===event.key&&L()}));n("IvQZ"),n("uQK7"),n("Xlt+"),n("fp7Y"),n("4NM0");var S=n("wiOx"),q=n.n(S);function x(e){u(),o.getOneMovieInfo(e).then((function(e){r.movieCard.innerHTML=q()([e]),function(e){document.querySelector(".movie-card").addEventListener("click",(function(t){if("BUTTON"===t.target.nodeName){var n=t.target.dataset.source;"add-watched"===n?k("add-watched",e):"add-queue"===n&&k("add-queue",e),O(e)}}))}(e.id)})).catch((function(){return i()})).finally((function(){return c()}))}function k(e,t){var n=[],a=JSON.parse(localStorage.getItem(e));null===a?(n.push(t),localStorage.setItem(e,JSON.stringify(n))):a.includes(t)?((n=a).splice(n.indexOf(t),1),localStorage.setItem(e,JSON.stringify(n))):((n=a).push(t),localStorage.setItem(e,JSON.stringify(n)))}function O(e){var t=JSON.parse(localStorage.getItem("add-watched")),n=JSON.parse(localStorage.getItem("add-queue")),a=document.querySelector(".watch-btn"),l=document.querySelector(".queue-btn");t.includes(Number(e))?a.textContent='remove  "watched"':a.textContent="add to watched",n.includes(Number(e))?l.textContent='remove  "queue"':l.textContent="add to queue"}r.gallery.addEventListener("click",(function(e){e.preventDefault();var t=e.target;if("UL"===t.nodeName)return;r.modal.classList.toggle("is-hidden"),x(t.dataset.id),setTimeout(O,500,t.dataset.id)})),r.closeModalBtn.addEventListener("click",L);n("iPZ8"),n("kypl"),n("pCzD"),n("4owi"),n("/YXa"),n("9UJh"),n("WoWj"),n("U00V");function _(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function E(e){r.gallery.innerHTML="",function(e){for(var t,n=JSON.parse(localStorage.getItem(e)),a=function(){var e=t.value,n=[];o.getOneMovieInfo(e).then((function(e){n.push(e),r.gallery.insertAdjacentHTML("beforeend",l()(n))}))},i=_(n);!(t=i()).done;)a()}(e)}r.myLib.addEventListener("click",(function(){return E("add-watched")})),r.watchedBtn.addEventListener("click",(function(){return E("add-watched")})),r.queueBtn.addEventListener("click",(function(){return E("add-queue")})),r.queueBtn.addEventListener("click",(function(){r.watchedBtn.classList.remove("btn--accent"),r.queueBtn.classList.add("btn--accent")})),r.watchedBtn.addEventListener("click",(function(){r.watchedBtn.classList.add("btn--accent"),r.queueBtn.classList.remove("btn--accent")}));var P=n("2c84"),M=n.n(P),j=(n("lUE2"),document.getElementById("tui-pagination-container"));new M.a(j,{totalItems:1e4,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child"}).on("afterMove",(function(e){var t=e.page;y(t)}))},uTJt:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,l){var o,r,i=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",s=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="movies-list-item">\n  <div class="wrap">\n   '+(null!=(o=d(n,"if").call(i,null!=t?d(t,"poster_path"):t,{name:"if",hash:{},fn:e.program(2,l,0),inverse:e.program(4,l,0),data:l,loc:{start:{line:4,column:3},end:{line:8,column:11}}}))?o:"")+'    </div>\n    <h2 class="list-item-title" data-id="'+s(typeof(r=null!=(r=d(n,"id")||(null!=t?d(t,"id"):t))?r:c)===u?r.call(i,{name:"id",hash:{},data:l,loc:{start:{line:10,column:41},end:{line:10,column:47}}}):r)+'">'+s(typeof(r=null!=(r=d(n,"title")||(null!=t?d(t,"title"):t))?r:c)===u?r.call(i,{name:"title",hash:{},data:l,loc:{start:{line:10,column:49},end:{line:10,column:58}}}):r)+'</h2>\n    <p class="list-item-descr" data-id="'+s(typeof(r=null!=(r=d(n,"id")||(null!=t?d(t,"id"):t))?r:c)===u?r.call(i,{name:"id",hash:{},data:l,loc:{start:{line:11,column:40},end:{line:11,column:46}}}):r)+'">'+s(typeof(r=null!=(r=d(n,"genre_ids")||(null!=t?d(t,"genre_ids"):t))?r:c)===u?r.call(i,{name:"genre_ids",hash:{},data:l,loc:{start:{line:11,column:48},end:{line:11,column:61}}}):r)+" | "+s(typeof(r=null!=(r=d(n,"release_date")||(null!=t?d(t,"release_date"):t))?r:c)===u?r.call(i,{name:"release_date",hash:{},data:l,loc:{start:{line:11,column:64},end:{line:11,column:80}}}):r)+' <span class="list-item-vote_average"> '+s(typeof(r=null!=(r=d(n,"vote_average")||(null!=t?d(t,"vote_average"):t))?r:c)===u?r.call(i,{name:"vote_average",hash:{},data:l,loc:{start:{line:11,column:119},end:{line:11,column:135}}}):r)+" </span></p>\n</li>\n"},2:function(e,t,n,a,l){var o,r=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' <img class="list-item-img" src="https://image.tmdb.org/t/p/w300/'+c("function"==typeof(o=null!=(o=u(n,"poster_path")||(null!=t?u(t,"poster_path"):t))?o:i)?o.call(r,{name:"poster_path",hash:{},data:l,loc:{start:{line:4,column:87},end:{line:4,column:102}}}):o)+'" alt="Movie" data-id="'+c("function"==typeof(o=null!=(o=u(n,"id")||(null!=t?u(t,"id"):t))?o:i)?o.call(r,{name:"id",hash:{},data:l,loc:{start:{line:4,column:125},end:{line:4,column:131}}}):o)+'" />\n'},4:function(e,t,n,a,l){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="list-item-img" src="https://motivatevalmorgan.com/wp-content/uploads/2016/06/default-movie-1-1-300x450.jpg"\n    alt="Movie" data-id="'+e.escapeExpression("function"==typeof(o=null!=(o=r(n,"id")||(null!=t?r(t,"id"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:l,loc:{start:{line:7,column:25},end:{line:7,column:31}}}):o)+'" />\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,l){var o;return null!=(o=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:1,column:0},end:{line:13,column:9}}}))?o:""},useData:!0})},wiOx:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,l){var o,r,i=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",s=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-box">\n    <div class="box-image">\n        <img class="one-movie-image" src="https://image.tmdb.org/t/p/w400/'+s(typeof(r=null!=(r=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?r:c)===u?r.call(i,{name:"poster_path",hash:{},data:l,loc:{start:{line:4,column:74},end:{line:4,column:89}}}):r)+'" alt="Poster">\n    </div>\n    <div class="box-content">\n        <h2 class="content-title">'+s(typeof(r=null!=(r=d(n,"title")||(null!=t?d(t,"title"):t))?r:c)===u?r.call(i,{name:"title",hash:{},data:l,loc:{start:{line:7,column:34},end:{line:7,column:43}}}):r)+'</h2>\n        <ul class="content-list">\n            <li class="content-item">\n                <p class="item-part">Vote / Votes </p>\n                <span class="item-data item-data--accent">'+s(typeof(r=null!=(r=d(n,"vote_average")||(null!=t?d(t,"vote_average"):t))?r:c)===u?r.call(i,{name:"vote_average",hash:{},data:l,loc:{start:{line:11,column:58},end:{line:11,column:74}}}):r)+'</span><span> / </span>\n                <span class="item-data item-data--accent item-data--grey">'+s(typeof(r=null!=(r=d(n,"vote_count")||(null!=t?d(t,"vote_count"):t))?r:c)===u?r.call(i,{name:"vote_count",hash:{},data:l,loc:{start:{line:12,column:74},end:{line:12,column:88}}}):r)+'</span>\n            </li>\n            <li class="content-item">\n                <p class="item-part">Popularity</p> <span class="item-data">'+s(typeof(r=null!=(r=d(n,"popularity")||(null!=t?d(t,"popularity"):t))?r:c)===u?r.call(i,{name:"popularity",hash:{},data:l,loc:{start:{line:16,column:76},end:{line:16,column:90}}}):r)+'</span>\n\n            </li>\n            <li class="content-item">\n                <p class="item-part">Original Title</p> <span class="item-data">'+s(typeof(r=null!=(r=d(n,"original_title")||(null!=t?d(t,"original_title"):t))?r:c)===u?r.call(i,{name:"original_title",hash:{},data:l,loc:{start:{line:20,column:80},end:{line:20,column:98}}}):r)+'</span>\n\n            </li>\n            <li class="content-item">\n                <p class="item-part">Genre\n                <ul class="genre-list">\n'+(null!=(o=d(n,"each").call(i,null!=t?d(t,"genres"):t,{name:"each",hash:{},fn:e.program(2,l,0),inverse:e.noop,data:l,loc:{start:{line:26,column:20},end:{line:28,column:29}}}))?o:"")+'                </ul>\n                </p>\n\n            </li>\n        </ul>\n        <h3 class="title-text">About</h3>\n        <p class="text">'+s(typeof(r=null!=(r=d(n,"overview")||(null!=t?d(t,"overview"):t))?r:c)===u?r.call(i,{name:"overview",hash:{},data:l,loc:{start:{line:35,column:24},end:{line:35,column:36}}}):r)+'</p>\n        <div class="box-btn">\n            <button id="add-watched" class="btn watch-btn" data-source=\'add-watched\'>add to Watched</button>\n            <button id="add-queue" class="btn queue-btn" data-source=\'add-queue\'>add to queue</button>\n        </div>\n    </div>\n</div>\n'},2:function(e,t,n,a,l){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                    <li class="item-data genre-data">'+e.escapeExpression(e.lambda(null!=t?o(t,"name"):t,t))+"</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,l){var o;return null!=(o=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:1,column:0},end:{line:42,column:9}}}))?o:""},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.327226d67b128d5bd28a.js.map